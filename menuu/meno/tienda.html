<!--DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Carrito de Compras</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #007bff;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-icon {
      position: relative;
      font-size: 20px;
      cursor: pointer;
    }

    .cart-count {
      position: absolute;
      top: -8px;
      right: -10px;
      background-color: red;
      color: white;
      font-size: 12px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      padding: 30px 20px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }

    .product-card {
      background-color: white;
      border-radius: 10px;
      padding: 15px;
      width: 220px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      text-align: center;
    }

    .product-card img {
      width: 100px;
      height: auto;
      margin-bottom: 10px;
    }

    .product-title {
      font-size: 16px;
      margin: 10px 0;
    }

    .product-price {
      font-weight: bold;
      color: #007bff;
      margin-bottom: 10px;
    }

    .add-to-cart {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .cart-container {
      max-width: 600px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .cart-container h2 {
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid #ccc;
    }

    .remove-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 5px 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    .clear-cart {
      margin-top: 15px;
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      width: 100%;
      cursor: pointer;
    }

    .total {
      font-size: 18px;
      text-align: right;
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <header>
    <h1>Mi Tienda</h1>
    <div class="cart-icon">
      <i class="fas fa-shopping-cart"></i>
      <div class="cart-count" id="cartCount">0</div>
    </div>
  </header>

  <!-- 🧁 Productos 
  <div class="container">
    <div class="product-card">
      <img src="https://example.com/tu-imagen.png" alt="Producto 1">
      <div class="product-title">Cobertura Dolcezza 1kg</div>
      <div class="product-price">$139.75</div>
      <button class="add-to-cart" onclick="addToCart('Cobertura Dolcezza 1kg', 139.75)">Agregar al carrito</button>
    </div>

    <!-- Puedes duplicar esta tarjeta para más productos 
    <div class="product-card">
      <img src="https://example.com/otro-producto.png" alt="Producto 2">
      <div class="product-title">Chocolate Turin 500g</div>
      <div class="product-price">$89.50</div>
      <button class="add-to-cart" onclick="addToCart('Chocolate Turin 500g', 89.50)">Agregar al carrito</button>
    </div>
  </div>

  <!-- 🛒 Carrito 
  <div class="cart-container" id="cartContainer" style="display: none;">
    <h2>Carrito de Compras</h2>
    <table id="cartTable">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Eliminar</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="total" id="cartTotal">Total: $0.00</div>
    <button class="clear-cart" onclick="clearCart()">Vaciar carrito</button>
  </div>

  <script>
    let cart = [];

    function addToCart(name, price) {
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push({ name, price, quantity: 1 });
      }
      updateCartDisplay();
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCartDisplay();
    }

    function clearCart() {
      cart = [];
      updateCartDisplay();
    }

    function updateCartDisplay() {
      const tableBody = document.querySelector('#cartTable tbody');
      const cartContainer = document.getElementById('cartContainer');
      const cartCount = document.getElementById('cartCount');
      const cartTotal = document.getElementById('cartTotal');

      tableBody.innerHTML = '';
      let totalItems = 0;
      let totalPrice = 0;

      if (cart.length === 0) {
        cartContainer.style.display = 'none';
        cartCount.textContent = 0;
        return;
      }

      cartContainer.style.display = 'block';

      cart.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${item.name}</td>
          <td>${item.quantity}</td>
          <td>$${(item.price * item.quantity).toFixed(2)}</td>
          <td><button class="remove-btn" onclick="removeItem(${index})">X</button></td>
        `;
        tableBody.appendChild(row);
        totalItems += item.quantity;
        totalPrice += item.quantity * item.price;
      });

      cartCount.textContent = totalItems;
      cartTotal.textContent = `Total: $${totalPrice.toFixed(2)}`;
    }
  </script>

</body>
</html-->

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Carrito de Compras</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!--style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #007bff;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-icon {
      position: relative;
      font-size: 20px;
      cursor: pointer;
    }

    .cart-count {
      position: absolute;
      top: -8px;
      right: -10px;
      background-color: red;
      color: white;
      font-size: 12px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      padding: 30px 20px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }

      .product-card {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 15px;
      width: 200px;
      text-align: center;
      position: relative;
    }

    .product-icons {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 8px;
    }

    .product-icons i {
      color: #007bff;
      cursor: pointer;
      font-size: 18px;
    }

    .product-icons i.liked {
      color: red;
    }

    .product-card img {
      width: 100px;
      height: auto;
      margin-bottom: 10px;
    }

    .product-title {
      font-size: 16px;
      margin: 10px 0;
    }

    .product-price {
      font-weight: bold;
      color: #007bff;
      margin-bottom: 10px;
    }

    .add-to-cart {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .cart-container {
      max-width: 600px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .cart-container h2 {
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid #ccc;
    }

    .remove-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 5px 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    .clear-cart {
      margin-top: 15px;
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      width: 100%;
      cursor: pointer;
    }

    .total {
      font-size: 18px;
      text-align: right;
      margin-top: 10px;
      font-weight: bold;
    }
  </style-->

  <style>
      body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #007bff;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
     .product-card {
      background-color: #fff;
      border-radius: 15px;
      padding: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
      position: relative;
      height: 100%;
      transition: transform 0.2s ease;
    }

    .product-card:hover {
      transform: translateY(-5px);
      filter: drop-shadow(2px 3px 20px rgb(26, 26, 26)); 
    }

    .product-card img {
      width: 100%;
      max-height: 150px;
      object-fit: contain;
      margin-bottom: 10px;
    }

    .product-title {
      font-size: 16px;
      margin-bottom: 5px;
    }

    .product-price {
      font-size: 18px;
      color: #007bff;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .add-to-cart {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      font-size: 14px;
    }

    .product-icons {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 10px;
    }

    .product-icons i {
      cursor: pointer;
      color: #007bff;
      font-size: 18px;
    }

    .like-icon.liked {
      color: red;
    }
     .product-card img {
      width: 100px;
      height: auto;
      margin-bottom: 10px;
    }

    .product-title {
      font-size: 16px;
      margin: 10px 0;
    }

    .product-price {
      font-weight: bold;
      color: #007bff;
      margin-bottom: 10px;
    }

    .add-to-cart {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .cart-container {
      max-width: 600px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .cart-container h2 {
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid #ccc;
    }

    .remove-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 5px 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    .clear-cart {
      margin-top: 15px;
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      width: 100%;
      cursor: pointer;
    }

    .total {
      font-size: 18px;
      text-align: right;
      margin-top: 10px;
      font-weight: bold;
    }

    .btti{
    background-color: #2c32e4;
    color: white;
    border-radius: 10px;
    width: 150px;
    height: 45px;
    }

.cart-icon .ppvr {
  position: relative;
  background-color: white;
  border: none;
  border-radius: 50%;
  width: 45px;
  height: 45px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.3s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.cart-icon .ppvr:hover {
  background-color: #f1f1f1;
}

.cart-icon i {
  color: #007bff;
  font-size: 20px;
}

.cart-count {
  position: absolute;
  top: -5px;
  right: -5px;
  background-color: red;
  color: white;
  font-size: 12px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}
  </style>
  </style>
     <!-- ✅ Bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- ✅ FontAwesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
<body>

  <header>
    <h1>Mi Tienda</h1>
    <div class="cart-icon">
        <button popovertarget="modal" class="ppvr">
            <i class="fas fa-shopping-cart"></i>
            <div class="cart-count" id="cartCount">0</div>
        </button>
    </div>
  </header>

  <!-- 🧁 Productos -->
    <section class="container my-5">
        <div class="row justify-content-center">

            <div class="col-12 col-sm-6 col-md-4 mb-4">
                <div id="" class="text-center">
                    <div class="product-card">
                        <div class="product-icons">
                            <i class="far fa-heart like-icon" data-id="producto-1"></i>
                            <i class="fas fa-share-alt share-icon"></i>
                        </div>
                            <img src="../Img/Icono Pastel-01.png" alt="Producto 2">
                        <div class="product-title">Chocolate Turin 500g</div>
                        <div class="product-price">$89.50</div>
                            <button class="add-to-cart" onclick="addToCart('Chocolate Turin 500g', 89.50)">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-6 col-md-4 mb-4">
                <div id="" class="text-center">
                    <div class="product-card">
                        <div class="product-icons">
                            <i class="far fa-heart like-icon" data-id="producto-2"></i>
                            <i class="fas fa-share-alt share-icon"></i>
                        </div>
                            <img src="../Img/Icono Pastel-01.png" alt="Producto 2">
                        <div class="product-title">Chocolate Turin 100g</div>
                        <div class="product-price">$89.50</div>
                            <button class="add-to-cart" onclick="addToCart('Chocolate Turin 100g', 89.50)">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-6 col-md-4 mb-4">
                <div id="" class="text-center">
                    <div class="product-card">
                        <div class="product-icons">
                            <i class="far fa-heart like-icon" data-id="producto-3"></i>
                            <i class="fas fa-share-alt share-icon"></i>
                        </div>
                            <img src="../Img/Icono Pastel-01.png" alt="Producto 3">
                        <div class="product-title">Almendras 1KG</div>
                        <div class="product-price">$83.50</div>
                            <button class="add-to-cart" onclick="addToCart('Almendras 1KG', 83.50)">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-6 col-md-4 mb-4">
                <div id="" class="text-center">
                    <div class="product-card">
                        <div class="product-icons">
                            <i class="far fa-heart like-icon" data-id="producto-4"></i>
                            <i class="fas fa-share-alt share-icon"></i>
                        </div>
                            <img src="../Img/Icono Pastel-01.png" alt="Producto 4">
                        <div class="product-title">Lechera</div>
                        <div class="product-subtitle">250KG</div>
                        <div class="product-price">$29.50</div>
                            <button class="add-to-cart" onclick="addToCart('Lechera 250KG', 29.50)">Agregar al carrito</button>
                    </div>
                </div>
            </div>


        </div>
    </section>       
    
        <div id="modal" popover>
            <!-- 🛒 Carrito -->
            <div class="cart-container" id="cartContainer" style="display: none;">
                <h2>Carrito de Compras</h2>
                <table id="cartTable">
                <thead>
                    <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio</th>
                    <th>Eliminar</th>
                    </tr>
                </thead>
                <tbody></tbody>
                </table>
                <div class="total" id="cartTotal">Total: $0.00</div>
                <button class="clear-cart" onclick="clearCart()">Vaciar carrito</button>
            </div>
            <center>
                <button popovertarget="modal" class="btti">Cerrar</button>                       
            </center>
        </div>
</div>

  <script>
    // ❤️ Like (me gusta)
  /*document.querySelectorAll('.like-icon').forEach(icon => {
    icon.addEventListener('click', () => {
      icon.classList.toggle('liked');
      icon.classList.toggle('far');
      icon.classList.toggle('fas');
    });
  });*/
  // Cargar estado de likes desde localStorage
document.addEventListener("DOMContentLoaded", () => {
  const likedItems = JSON.parse(localStorage.getItem("likedItems")) || {};

  document.querySelectorAll('.like-icon').forEach(icon => {
    const id = icon.dataset.id;

    // Si estaba guardado como "me gusta", aplicamos la clase
    if (likedItems[id]) {
      icon.classList.add("liked", "fas");
      icon.classList.remove("far");
    }

    // Listener para marcar/desmarcar
    icon.addEventListener("click", () => {
      icon.classList.toggle("liked");
      icon.classList.toggle("far");
      icon.classList.toggle("fas");

      // Guardamos o eliminamos del localStorage
      likedItems[id] = icon.classList.contains("liked");
      localStorage.setItem("likedItems", JSON.stringify(likedItems));
    });
  });
});

  // 🔗 Compartir
  document.querySelectorAll('.share-icon').forEach(icon => {
    icon.addEventListener('click', async () => {
      const url = window.location.href;

      if (navigator.share) {
        try {
          await navigator.share({
            title: document.title,
            text: '¡Mira este producto!',
            url: url,
          });
        } catch (error) {
          console.error('Error al compartir:', error);
        }
      } else if (navigator.clipboard) {
        try {
          await navigator.clipboard.writeText(url);
          alert('¡Enlace copiado al portapapeles!');
        } catch (err) {
          alert('No se pudo copiar el enlace');
        }
      } else {
        alert('Tu navegador no admite compartir enlaces.');
      }
    });
  });

    /*let cart = [];

    function addToCart(name, price) {
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push({ name, price, quantity: 1 });
      }
      updateCartDisplay();
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCartDisplay();
    }

    function clearCart() {
      cart = [];
      updateCartDisplay();
    }

    function updateCartDisplay() {
      const tableBody = document.querySelector('#cartTable tbody');
      const cartContainer = document.getElementById('cartContainer');
      const cartCount = document.getElementById('cartCount');
      const cartTotal = document.getElementById('cartTotal');

      tableBody.innerHTML = '';
      let totalItems = 0;
      let totalPrice = 0;

      if (cart.length === 0) {
        cartContainer.style.display = 'none';
        cartCount.textContent = 0;
        return;
      }

      cartContainer.style.display = 'block';

      cart.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${item.name}</td>
          <td>${item.quantity}</td>
          <td>$${(item.price * item.quantity).toFixed(2)}</td>
          <td><button class="remove-btn" onclick="removeItem(${index})">X</button></td>
        `;
        tableBody.appendChild(row);
        totalItems += item.quantity;
        totalPrice += item.quantity * item.price;
      });

      cartCount.textContent = totalItems;
      cartTotal.textContent = `Total: $${totalPrice.toFixed(2)}`;
    }*/
   let cart = [];

// ⏪ Recuperar carrito guardado (si existe)
window.addEventListener('DOMContentLoaded', () => {
  const storedCart = localStorage.getItem('cart');
  if (storedCart) {
    cart = JSON.parse(storedCart);
    updateCartDisplay();
  }
});

function addToCart(name, price) {
  const existing = cart.find(item => item.name === name);
  if (existing) {
    existing.quantity += 1;
  } else {
    cart.push({ name, price, quantity: 1 });
  }
  updateCartDisplay();
}

function removeItem(index) {
  cart.splice(index, 1);
  updateCartDisplay();
}

function clearCart() {
  cart = [];
  updateCartDisplay();
}

function updateCartDisplay() {
  const tableBody = document.querySelector('#cartTable tbody');
  const cartContainer = document.getElementById('cartContainer');
  const cartCount = document.getElementById('cartCount');
  const cartTotal = document.getElementById('cartTotal');

  tableBody.innerHTML = '';
  let totalItems = 0;
  let totalPrice = 0;

  if (cart.length === 0) {
    cartContainer.style.display = 'none';
    cartCount.textContent = 0;
    localStorage.removeItem('cart'); // Borra el localStorage si el carrito está vacío
    return;
  }

  cartContainer.style.display = 'block';

  cart.forEach((item, index) => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${item.name}</td>
      <td>${item.quantity}</td>
      <td>$${(item.price * item.quantity).toFixed(2)}</td>
      <td><button class="remove-btn" onclick="removeItem(${index})">X</button></td>
    `;
    tableBody.appendChild(row);
    totalItems += item.quantity;
    totalPrice += item.quantity * item.price;
  });

  cartCount.textContent = totalItems;
  cartTotal.textContent = `Total: $${totalPrice.toFixed(2)}`;

  // 💾 Guardar en localStorage
  localStorage.setItem('cart', JSON.stringify(cart));
}

  </script>

</body>
</html>